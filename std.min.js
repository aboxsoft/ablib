String.prototype.hash=function(){var h=0,c="",i=0,j=this.length;if(!j)return h;while(i++<j){c=this.charCodeAt(i-1);h=(h<<5)-h+c;h|=0}return Math.abs(h).toString()};String.prototype.uton=function(){return this.replace(".php","").replace(".htm","").replace(".html","").replace(".xhtml","").replace(/[^a-zA-Z0-9]/g,"")};String.prototype.int=function(){if(!this)return 0;var a=this.toString();if(a.indexOf(",")<a.indexOf("."))a=parseInt(a.replace(/[,]/g,"").replace(/[^-0-9.]/g,""));else a=parseInt(a.replace(/[.]/g,"").replace(/[,]/g,".").replace(/[^-0-9.]/g,""));return a*1};String.prototype.float=function(f=2){var a=this;if(a==null||a==undefined||a==""||a==" ")return 0;if(a.indexOf(",")<a.indexOf("."))a=parseFloat(a.replace(/\,/g,"").replace(/[^0-9.]/g,""));else a=parseFloat(a.replace(/[.]/g,"").replace(/[,]/g,".").replace(/[^-0-9.]/g,""));return a};String.prototype.money=function(){if(this==null||this==undefined||this=="")return"R$ 0,00";var t=this.float().toString();if(t.indexOf(".")>=0){t=t.split(".");t[0]=t[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.");t[1]=t[1].slice(0,2);return"R$ "+t.join(",")}else return"R$ "+t.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.")+",00"};String.prototype.date=function(){var t=this;t=t.split("-").reverse().join("").replace(/[^0-9]/g,"");if(t.length>2){t=[t.slice(0,2),t.slice(2,4),t.slice(4,8)].join("/")}return t};String.prototype.hour=function(){var t=this.replace(/[^0-9]/g,"");if(t.length>2)return[t.slice(0,2),t.slice(2,4)].join(":")};String.prototype.phone=function(){if(this.length>4){var t=this.replace(/[^0-9]/g,"");if(t.length<=10)t=["(",t.slice(0,2),")",t.slice(2,6),"-",t.slice(6,10)].join("");else t=["(",t.slice(0,2),")",t.slice(2,7),"-",t.slice(7,11)].join("");return t}return this};String.prototype.document=function(){if(this.length>2){var t=this.replace(/[^0-9]/g,"");if(t.length<10)t=[t.slice(0,2),".",t.slice(2,5),".",t.slice(5,8),"-",t.slice(8)].join("");else if(t.length<12)t=[t.slice(0,3),".",t.slice(3,6),".",t.slice(6,9),"-",t.slice(9)].join("");else t=[t.slice(0,2),".",t.slice(2,5),".",t.slice(5,8),"/",t.slice(8,12),"-",t.slice(12,14)].join("");return t?t:null}return this};String.prototype.basicChar=function(){return this.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_@.]/g,"")};Number.prototype.int=function(){if(!this)return 0;return parseInt(this)};Number.prototype.float=function(){if(this==null||this==undefined||this==""||!this)return 0;return parseFloat(this)};Number.prototype.money=function(){if(this==null||this==undefined||this=="")return"R$ 0,00";return this.toString().money()};HTMLInputElement.prototype.up=function(name=null,path=null,func=null,mode=this.Modes.APPEND,mini=0,forc=0){if(!this.value||!this.files.length||!path)return;__self.loading(true);if(this.files[0].size>1024*1024*5){__self.error("Ops! Arquivo muito grande...");return}var ctnr=this.myId();name=name||__self.newId(13);var form=new Form_Data,counter=0;form.append("pic0",this.files[0]);form.append("name",name);form.append("path",path);form.append("mode",mode);form.append("forc",forc);form.append("mini",mini);xhr=new XMLHttpRequest;if(func)xhr.upload.onload=function(){var timer=setInterval(function(){if(xhr.responseText||counter++==1e4){eval(func)(xhr.responseText);__self.loading(false);clearInterval(timer)}if(counter>=1e4){__self.loading(false);__self.error()}},10)};xhr.upload.onerror=function(d){__self.error("Ops! Não foi possível subir esta imagem, tente novamente mais tarde...");__self.loading(false)};xhr.open("POST","lib/up.php");xhr.send(form)};HTMLElement.prototype.myId=function(){if(!this.id){this.id=(new Abox).newId(4)}return this.id};HTMLElement.prototype.idx=function(){var nodes=Array.prototype.slice.call(this.parentElement.children);return nodes.indexOf(this)};HTMLElement.prototype.delete=function(){this.parentElement.removeChild(this)};HTMLElement.prototype.remClass=function(c){if(this.classList.contains(c)){var tmp=this.className.split(/\s+/g);tmp.splice(this.className.split(/\s+/g).indexOf(c),1);this.className=tmp.join(" ");return this.className}else return false};HTMLElement.prototype.addClass=function(c){if(!this.classList.contains(c))this.className+=" "+c;else return false};HTMLElement.prototype.trans=function(o=null,len=80,fn=null){if(o===null)return;len/=10;var iter=0,el=this,pl=o.left!=null?(o.left-this.offsetLeft)/len:0,pt=o.top!=null?(o.top-this.offsetTop)/len:0,pw=o.width!=null?(o.width-this.offsetWidth)/len:0,ph=o.height!=null?(o.height-this.offsetHeigth)/len:0,pa=o.alpha!=null?(o.alpha-this.style.opacity)/len:0;if(el.dataset.transition)clearInterval(el.dataset.transition);el.dataset.transition=setInterval(function(){if(iter++>len){clearInterval(el.dataset.transition);el.dataset.transition="";if(pt)el.style.top=o.top+"px";if(pl)el.style.left=o.left+"px";if(pw)el.style.width=o.width+"px";if(ph)el.style.height=o.height+"px";if(pa)el.style.opacity=o.alpha}else{if(pt)el.style.top=el.offsetTop+pt+"px";if(pl)el.style.left=el.offsetLeft+pl+"px";if(pw)el.style.width=el.offsetWidth+pw+"px";if(ph)el.style.height=el.offsetHeight+pw+"px";if(pa)el.style.opacity=(el.style.opacity.float()+pa).toString()}},10)};HTMLElement.prototype.fill=function(){if(this.tagName!="SELECT"||this.dataset.filled||!this.dataset.content)return;this.dataset.filled=1;var id=this.myId();var tmp=this.dataset.content.split(/[;:,.-]/g);var fn=this.dataset.callback?this.dataset.callback:null;if(fn&&fn.indexOf("::this")>=0)fn=fn.split("::this").join("document.getElementById('"+id+"')");if(tmp.length>1){__self.call("../lib/ctrl/qsfill.php",{tabl:tmp[0],fild:tmp[1],rest:tmp[2]?tmp[2]:null,selt:tmp[3]?tmp[3]:null,fnam:tmp[4]?tmp[4]:null},function(d){d=JSON.parse(d);var x=document.getElementById(id);x.innerHtml="";x.textContent="";var t=document.createElement("option");t.value="";t.textContent="";t.setAttribute("selected","selected");x.appendChild(t);if(d.length){for(var i in d){var t=document.createElement("option");t.value=d[i].value;t.textContent=d[i].text;if(d[i].selected.int())t.setAttribute("selected","selected");x.appendChild(t)}}if(fn)eval(fn.indexOf("this")>-1?fn.split("this").join("document.getElementById('"+id+"')"):fn);if(tmp[3]&&x)x.focus()},false,false)}else{this.appendChild((new DOMParser).parseFromString('<option value=""></option>',"text/xml"))}};HTMLElement.prototype.refill=function(){this.removeAttribute("_Data-filled");this.fill()};HTMLElement.prototype.inPage=function(){with($(window)){var page={top:scrollTop(),bottom:scrollTop()+__self.h(),height:__self.h()}}var element={top:$(this).offset().top,bottom:$(this).offset().top+$(this).height()};if(element.top<=page.bottom+1&&element.bottom>=page.top-1){return{offset:element.top-page.top,where:1-(element.top-page.top)/page.height}}else{return false}};HTMLElement.prototype.scrollTo=function(el,t=320){if(!el)return-1;t=t/10;var __self=this,count=0,pace=(this.scrollTop-el.offsetTop)/t*-1;clearInterval(__self.dataset.scrolling);this.dataset.scrolling=setInterval(function(){if(count++>=t-1)clearInterval(__self.dataset.scrolling);__self.scrollTop=__self.scrollTop+pace},10)};HTMLElement.prototype.appear=function(t=80,scop){var ot=this.offsetTop;this.style.display="inline-block";this.style.top=(ot+32).toString()+"px";this.trans({top:ot,alpha:1},t);if(this.isModal()&&scop)scop.reorder(this.myId())};HTMLElement.prototype.desappear=function(t=80,r=null,scop){var ot=this.offsetTop;this.trans({top:this.ot+32,alpha:0},t);if(scop&&this.isModal()){scop.windows[scop.windows.indexOf(this.myId())]=null;scop.reorder()}setTimeout(function(r,d,o){if(d.dataset.moving){clearInterval(d.dataset.moving);d.dataset.moving=""}if(r)d.delete();else{d.style.top=o+"px";d.style.display="none"}},t+10,r,this,ot)};HTMLElement.prototype.checkout=function(){if(!this.classList.contains("-required")||["input","select","textarea"].indexOf(this.tagName.toLowerCase())<0)return false;this.blur();if(!this.value){this.style.border="2px solid red";return false}else{this.style.border="2px solid green";return true}};HTMLElement.prototype.isModal=function(){if(!this.className)return false;var mod=["-window","-panel","-dialog","-wrapper"],arr=this.className.split(" "),i=0,j=0,matches=false;while(arr[i++]&&!matches){while(mod[j++]&&!matches){if(arr[i-1]==mod[j-1])matches={p:j-1}}j=0}return matches?{which:mod[matches.p]}:false};HTMLElement.prototype.parentModal=function(){var el=this,z=false;while(el&&!z){if(el.isModal())z=el;el=el.parentElement}return z};class Auth{constructor(m=null){this.mod=m;this.uri="../lib/auth/";switch(this.mod){case this.AuthClient.OLX:this.uri+="olx";break;case this.AuthClient.FACEBOOK:this.uri+="facebook";break;case this.AuthClient.INSTAGRAM:this.uri+="instagram";break;case this.AuthClient.GOOGLE:this.uri+="google";break}this.uri+=".php"}exec(o=null,fn=null){if(!o)return 0;return __self.exec(this.uri,o,function(d){if(fn)return fn(d)})}authenticate(fn=null){__self.loading(1);return __self.exec(this.uri,{mode:"auth"},function(d){var w=window.open(JSON.parse(d).auth_url,"Autenticação oAuth2","_blank,width=400,height=300","toolbar=0, location=0, menubar=0");var timer=setInterval(function(){if(w.closed){clearInterval(timer);if(fn)return fn()}},400)})}handShake(fn=null){return this.exec({mode:"hshk"},fn)}getInfo(fn=null){return this.exec({mode:"info"},fn)}publish(c=null,fn=null){return this.exec({mode:"publ",code:c},fn)}remove(c=null,fn=null){return this.exec({mode:"remv",code:c},fn)}status(c=null,fn=null){return this.exec({mode:"stts",code:c},fn)}easyAuth(fn=null){return this.authenticate(function(){return new Auth(this.AuthClient.OLX).handShake(function(d){if(fn)fn(d)})})}}class Data{constructor(o){this.bindobj_={template:null,target:null,function:null,index:0};this.init(o)}init(o=null){this.clear();if(!o)return;this.scope(o.scope?o.scope:null);this.limitRange(o.args.limit?o.args.limit:[0,1e3]);if(this.configFile(o.args.conf?o.args.conf:null)&&this.loadMode(o.args.load?o.args.load:null))this.load();if(!this.obj)this.clear();if(this.configFile_&&!this.loadMode_)this.obj[0].code=(new Abox).newId(32)}innerObj(i=null){if(!this.obj)return null;if(i===null)return this.obj;return this.obj[i.int()]?this.clone(i.int()):0}scope(o){this.scope_=o?o:new Abox;return this.scope_}run(fn=null,idx=0){if(this.configFile_){this.scope_.call("../etc/handler.php",{conf:this.configFile_,data:this.obj[idx]},fn,false,true)}}value(f,v=null,i=0){if(!this.obj.length)return-1;if(this.obj.length<=i)i=this.obj.length;if(v!==null)this.obj[i][f]=v;if(this.obj[i][f])return this.obj[i][f];return 0}clear(){this.obj=[{code:null}]}rows(){return this.obj.length}configFile(t=null){if(t)this.configFile_=t;return this.configFile_?this.configFile_:null}loadMode(q=null){if(q)this.loadMode_=q;return this.loadMode_?this.loadMode_:null}limitRange(l=null){if(l&&Array.isArray(l))this.limitRange_=l;return this.limitRange_?this.limitRange_:[0,100]}load(o=null){var __self=this;if(!this.configFile_||!this.loadMode_)return null;this.scope_.call("../etc/loader.d/"+this.configFile_,{limit:this.limitRange_},function(d){if(d.status==200)__self.obj=d.data;else __self.clear()},true,false)}bind(tmp=this.bindobj_.template,tgt=this.bindobj_.target,fn=this.bindobj_.function,idx=this.bindobj_.index){var __self=this;this.bindobj_={template:tmp,target:tgt,function:fn,index:idx};var cb=null;if(!tmp)return-1;if(!tgt)tgt=[];else{tgt.desappear();if(tgt.dataset.callback)cb=tgt.dataset.callback.split("this").join('document.getElementById("'+tgt.myId()+'")')}if(this.obj.length&&this.obj[0]&&this.obj[0].code!=null){if(idx!=null&&this.obj[idx]&&this.obj[idx].code!=null){var x=this.obj[idx];this.obj=[];this.obj[0]=x}else if(idx!=null&&!this.obj[idx]){var x=document.createElement("div");x.innerHtml="<div class='rel bwhite tct ns' _Data-map='-w280px:-w90%' style='margin:0 1vw;opacity:1;'><icon class='xpd fxx ft-caveat fspan disabled' style='opacity:.5'>&#xe02e;</icon></div>";tgt.appendChild(x.firstChild);tgt.appear();return}for(var i=0;i++<this.obj.length;){var x=this.obj[i-1],t=tmp.cloneNode(true),b=t.getElementsByClassName("-bind");t.id=x.code;for(var i in b){if(typeof b[i]=="object"){var z=eval("x."+b[i].dataset.field);if(z){if(b[i].tagName.toLowerCase()=="input")b[i].value=z;else if(b[i].classList.contains("-switched"))b[i].dataset.state=z.int()?"1":"0";else if(b[i].tagName.toLowerCase()=="img")b[i].style.display=z.int()?"inline-block":"none";else b[i].innerText=z}}b.remClass("-bind");b.addClass("-binded")}if(Array.isArray(tgt))tgt.push(t);else tgt.appendChild(t)}if(fn)eval(fn)}else{var x=document.createElement("div");x.innerHtml="<div class='fn ft-caveat fspan wf tct xys'>Nada para mostrar aqui...</div>";tgt.appendChild(x.firstChild);tgt.appendChild(x)}if(cb)eval(cb);tgt.appear();return tgt}updateBind(fn=this.bindobj.function,idx=null){var rang=idx>=0?[this.obj[idx]]:this.obj;for(var i=0;i++<rang.length;){var x=rang[i-1],t=x.getElementById(rang[i-1].code),b=t.getElementsByClassName("-binded");for(var i in b){if(typeof b[i]=="object"){b[i].style.opacity="0";var z=eval("x."+b[i].dataset.field);if(z){if(b[i].tagName.toLowerCase()=="input")b[i].value=z;else if(b[i].classList.contains("-switched"))b[i].dataset.state=z.int()?"1":"0";else if(b[i].tagName.toLowerCase()=="img")b[i].style.display=z.int()?"inline-block":"none";else b[i].innerText=z}b[i].appear()}}}if(fn)eval(fn)}remove(idx=0){delete this.obj[idx]}clone(idx=0,detach=false){if(typeof idx=="string"){var x=this.obj.length;while(x--||this.obj[x].code==idx);if(x==-1)return x;idx=x.int()}var tmp=new Data;tmp.config(this.configFile_);tmp.limit(this.limitRange_);tmp.scope(this.scope_);tmp.loadMode(this.loadMode_);tmp.bindobj_=this.bindobj_;tmp.obj=[this.obj[idx]];if(detach)delete this.obj[idx];return tmp}pop(idx=0){return this.clone(idx,true)}push(elmnt=null){if(elmnt&&elmnt.code){this.obj.push(elmnt);return 1}return 0}find(code=null,pop=false){if(code&&this.obj.length){for(var i=0;i++<this.obj.length;){if(this.obj[i-1].code==code)return this.clone(i-1,pop)}return 0}}}class Datetime{constructor(d){if(d)this.init(d)}init(d=0){if(d.indexOf("-")>1){this.__date__=d.split("-").reverse().join("/")}else{this.__date__=d.date?d.date:this.today(0);this.__time__=d.time?d.time:this.now(0)}}today(c=0){var tmp=((new Date).getDate()<9?"0"+(new Date).getDate():(new Date).getDate())+"/"+((new Date).getMonth()<9?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1)+"/"+(new Date).getFullYear();if(c)this.__date__=tmp;return tmp}now(c=0){var a=new Date;var tmp=(a.getHours()<10?"0":"")+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()+":"+(a.getSeconds()<10?"0":"")+a.getSeconds();if(c)this.__time__=tmp;return tmp}plus(n=1,c=0){if(!this.__date__)this.today(true);var tmp=this.__date__.split("/");tmp=new Date(tmp[2],tmp[1]-1,tmp[0]);tmp.setDate(tmp.getDate()+n);tmp=(tmp.getDate()<10?"0"+tmp.getDate():tmp.getDate())+"/"+(tmp.getMonth()<10?"0"+(tmp.getMonth()+1):tmp.getMonth()+1)+"/"+tmp.getFullYear();if(c)this.date(tmp);return tmp}intl(d=0,c=0){if(!d&&!this.__date__)return false;var tmp="";if(d){if(c)this.__date__=d;tmp=d.split("/")}else{tmp=this.__date__.split("/")}tmp=tmp[2]+"-"+tmp[1]+"-"+tmp[0];return tmp}days(d=0,t=this.Types.FLOAT,c=0){if(!d&&!this.__date__)return false;var tmp="";if(d){tmp=d.split("/");if(c)this.__date__=d}else{tmp=this.__date__.split("/")}if(tmp.length!==3)return-1;var year=(new Date).getFullYear().float();var days=tmp[0].float()+(30.44*(tmp[1].int()-1)).float()+(365.24*year).float();return t==this.Types.INTEGER?days.int():days.float()}cmp(d=0,a=this.Types.ABSOLUTE){if(!this.__date__)return false;var tmp;if(d){tmp=new _Date(d)}else{tmp=new _Date(this.today())}tmp=this.days(0,this.Types.INTEGER)-tmp.days(0,this.Types.INTEGER);return a==this.Types.ABSOLUTE?Math.abs(tmp):tmp}date(d=0){if(d){if(d=="today")this.today(1);else this.__date__=d}return this.__date__}time(h=0){if(h)if(h=="now")this.now(1);else this.__time__=h;else this.now(1);if(this.__time__)return this.__time__;return false}datetime(d=1,t=1){if(this.__date__){if(this.__time__){return this.__date__+"_"+this.__time__}else{return this.__date__+"_"+this.now(t)}}else{if(this.__time__){return this.today(d)+"_"+this.__time__}else{return this.today(d)+"_"+this.now(t)}}}}class Throttle{constructor(f,t=256,poff=true){this.assign(f,t,poff)}assign(f,t,p){this.func=f;this.delay=t;this.putOff=p;this.timer=(new Date).getTime()}fire(){var now=(new Date).getTime();if(now-this.delay>this.timer){this.func.apply();this.timer=now}else if(this.putOff)setTimeout(function(d){d.fire()},this.delay+1,this)}}class Abox{constructor(){var __self=this;this.loadPool=[];this.schema=null;this.config=null;this.mousePos={top:null,left:null};this.user=null;this.chrooted=null;this.viewport=null;this.responsivenessTreshold=1024;this.calls=Object.freeze({SYNC:true,ASYNC:false});this.types=Object.freeze({FOLDER:0,FILE:1,FLOAT:2,INTEGER:3,STRING:4,BINARY:5,ABSOLUTE:6,ASSOC:7,ARRAY:8,JSON:9,OBJECT:10,INDEX:11});this.modes=Object.freeze({VIEW:4,EDIT:2,NEW:1,REMOVE:3,APPEND:6,PREPEND:7,REPLACE:5,RECURSIVE:true,NO_RECURSIVE:false,FORCED:true,STANDARD:false,PORTRAIT:false,LANDSCAPE:true,LOG:true,NOLOG:false});this.directions=Object.freeze({OUT:-1,IN:1,RIGHT:1,LEFT:-1});this.enviroments=Object.freeze({SESSION:1,COOKIE:2});this.authClient=Object.freeze({OLX:1,FACEBOOK:2,INSTAGRAM:3,GOOGLE:4});this.objects=Object.freeze({TEXTFIELD:1,SELECTBOX:2,TILE:3,ROW:4,WINDOW:5,PANEL:6,DIALOG:7,WRAPPER:8});this.effects=Object.freeze({FADEIN:true,FADEOUT:false});this.locations=Object.freeze({CHROOT:true,ROOT:false});this.windows=[];this.tray=[];window.addEventListener("mousemove",function(e){__self.mousePos.left=e.clientX;__self.mousePos.top=e.clientY},true)}w(n=100){return window.outerWidth/100*n}h(n=100){return window.outerHeight/100*n}body(){return document.getElementsByTagName("body")[0]}data(o){return new Data({args:o,scope:this})}date(o){return new Datetime(o)}reorder(t){let tmp=[];for(var i=-1;++i<this.windows.length;)if(this.windows[i]&&this.windows[i]!==t)tmp.push(this.windows[i]);this.windows=tmp;if(t)this.windows.push(t);for(var i=-1;++i<this.windows.length;)document.getElementById(this.windows[i]).style.zIndex=1e3+i;tmp=[];for(var i=this.tray.length;i--;)if(this.tray[i]!=null)tmp.push(this.tray[i]);for(var i=this.tray.length;i--;){var x=document.getElementById(this.tray[i]);x.style.zIndex=1100+i;x.trans({top:this.h(95),left:this.w(10)*i},40)}}organize(){this.viewport=this.w()<this.responsivenessTreshold||this.w()<this.h()?this.modes.PORTRAIT:this.modes.LANDSCAPE;var __self=this,maps=document.getElementsByClassName("-map");if(maps.length){for(var i=maps.length;i--;){maps[i].addClass("-mapped");maps[i].dataset.landscape="";maps[i].dataset.portrait="";var sw=maps[i].dataset.toggle.split(/\s+/g);for(var j=sw.length;j--;){var un=sw[j].split(/[:;,._]/g);maps[i].dataset.landscape+=un[0]?" "+un[0]:"";maps[i].dataset.portrait+=un[1]?" "+un[1]:""}maps[i].remClass("-map")}}maps=document.getElementsByClassName("-mapped");if(maps.length){for(var i=maps.length;i--;){var rem=this.viewport===this.modes.PORTRAIT?maps[i].dataset.landscape:maps[i].dataset.portrait,add=this.viewport===this.modes.PORTRAIT?maps[i].dataset.portrait:maps[i].dataset.landscape;for(var j=rem.split(/\s+/g).length;j--;)maps[i].remClass(rem.split(/\s+/g)[j]);for(var j=add.split(/\s+/g).length;j--;)maps[i].addClass(add.split(/\s+/g)[j])}}maps=document.getElementsByClassName("-switch");if(maps.length){for(var i=maps.length;i--;){maps[i].addClass("-switched");maps[i].src="src/img/std/switch_off.svg";if(maps[i].dataset.state)maps[i].src="src/img/std/switch_"+(maps[i].dataset.state.int()?"on":"off")+".svg";else maps[i].dataset.state="0";maps[i].addEventListener("click",function(){if(this.dataset.state.int()){if(this.dataset.off)eval(this.dataset.off);this.src="src/img/std/switch_off.svg";this.dataset.state="0"}else{if(this.dataset.on)eval(this.dataset.on);this.src="src/img/std/switch_on.svg";this.dataset.state="1"}},true);maps[i].remClass("-switch")}}maps=document.getElementsByClassName("-imgview");if(maps.length){for(var i=maps.length;i--;){maps[i].addEventListener("click",function(){__self.load("../lib/ui/img_view.php",{pic0:this.src},160,null,true)});maps[i].remClass("-imgview")}}maps=document.getElementsByClassName("-blur");if(maps.length){for(var i=maps.length;i--;){maps[i].prepend(document.createElement("blur"));maps[i].remClass("-blur")}}maps=document.getElementsByClassName("-ask");if(maps.length){for(var i=maps.length;i--;){maps[i].addEventListener("click",function(){__self.load("../lib/ui/ask.php",{from:this.myId(),mesg:this.dataset.message})});maps[i].remClass("-ask")}}maps=document.querySelectorAll("[class*='-wd'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-wd")>=0)maps[i].style.width=x[cls].split(/wd/g)[1]}}maps=document.querySelectorAll("[class*='-ht'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-ht")>=0)maps[i].style.height=x[cls].split(/ht/g)[1]}}maps=document.querySelectorAll("[class*='-ft'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-ft")>=0)maps[i].style.fontSize=x[cls].split(/ft/g)[1]}}maps=document.querySelectorAll("[class*='-lt'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-lt")>=0)maps[i].style.left=x[cls].split(/lt/g)[1]}}maps=document.querySelectorAll("[class*='-tp'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-tp")>=0)maps[i].style.top=x[cls].split(/tp/g)[1]}}maps=document.querySelectorAll("[class*='-zi'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-zi")>=0)maps[i].style.zIndex=x[cls].split(/zi/g)[1]}}maps=document.querySelectorAll("[class*='-op'");if(maps.length){for(var i=maps.length;i--;){var x=maps[i].className.split(/\s+/g);for(var cls in x)if(x[cls].indexOf("-op")>=0)maps[i].style.opacity=x[cls].split(/op/g)[1]}}maps=document.getElementsByClassName("-close");if(maps.length){for(var i=maps.length;i--;){maps[i].addClass("-closed");var ic=document.createElement("icon");ic.textContent="M";ic.className="fn hpd";maps[i].appendChild(ic);maps[i].onmouseenter=function(){this.style.background="red";this.style.color="white"};maps[i].onmouseleave=function(){this.style.background="initial";this.style.color="initial"};maps[i].addEventListener("click",function(){this.parentModal().desappear(80,true,__self)});maps[i].remClass("-close")}}maps=document.getElementsByClassName("-maximize");if(maps.length){for(var i=maps.length;i--;){maps[i].remClass("-maximize");maps[i].addEventListener("click",function(){if(this.parentModal().dataset.state!=="maximized")this.parentModal().maximize();else this.parentModal().restore()},true)}}maps=document.getElementsByClassName("-minimize");if(maps.length){for(var i=maps.length;i--;){maps[i].addEventListener("click",function(){if(this.parentModal().dataset.state!=="minimized")this.parentModal().minimize();else this.parentModal().restore()},true);maps[i].remClass("-minimize")}}maps=document.getElementsByClassName("-restore");if(maps.length){for(var i=maps.length;i--;){maps[i].remClass("-restore");maps[i].addEventListener("click",function(){this.parentModal().restore()},true)}}maps=document.getElementsByClassName("-banner");if(maps.length){for(var i=maps.length;i--;){maps[i].style.height=maps[i].offsetWidth/2+"px"}}maps=document.getElementsByClassName("-square");if(maps.length){for(var i=maps.length;i--;){maps[i].style.height=maps[i].offsetWidth+"px"}}var inputs=document.getElementsByTagName("input");if(inputs.length){for(var i=0;i++<inputs.length;){if(!inputs[i-1].getAttribute("placeholder"))inputs[i-1].setAttribute("placeholder"," ")}}maps=document.getElementsByClassName("-drag");if(maps.length){for(var i=maps.length;i--;){maps[i].remClass("-drag");maps[i].startDrag()}}maps=document.getElementsByClassName("-datetime");if(maps.length){for(var i=maps.length;i--;){if(maps[i].dataset.format){if(maps[i].dataset.format=="date")maps[i].value=__self.date().date();if(maps[i].dataset.format=="time")maps[i].value=__self.date().time()}else maps[i].value=__self.date().datetime()}}maps=document.getElementsByClassName("-hash");if(maps.length){for(var i=maps.length;i--;){maps[i].addEventListener("change",function(){if(this.value)this.value=this.value.hash()},true);maps[i].remClass("-hash")}}this.reorder()}controls(){var ctrls=document.getElementsByClassName("-control");if(ctrls.length){for(var i=ctrls.length;i--;){ctrls[i].addClass("-controlled");if(["input","textarea","select"].indexOf(ctrls[i].tagName.toLowerCase())>=0){ctrls[i].addEventListener("blur",function(){var hnd=this.dataset.object.split(/[;:,-]/g);eval(hnd[0].trim()).value(hnd[1].trim(),this.value?this.value.replace(/["']/g,"&quot;"):null);this.checkout()})}else if(ctrls[i].classList.contains("-switched")){ctrls[i].addEventListener("click",function(){var hnd=this.dataset.object.split(/[;:,-]/g);eval(hnd[0].trim()).value(hnd[1].trim(),this.dataset.state.int())},true)}ctrls[i].remClass("-control")}}}loading(t=true){var el=document.getElementsByClassName("-loading");if(!el.length){var x=document.createElement("div"),y=document.createElement("img");y.className="-wheel";y.src="src/img/std/wheel.png";x.appendChild(y);x.className="-loading tct";this.body().appendChild(x);el=[x]}if(t)el[0].style.display="block";else el[0].style.display="none"}notify(n,c=["white","black"],l=this.modes.NOLOG){var __self=this,notfys=document.getElementsByTagName("toast"),toast=document.createElement("toast");toast.style.background=c[0]?c[0]:"white";toast.style.color=c[1]?c[1]:"black";toast.textContent=n?n:"Hello World!!!";toast.style.left="60%";toast.style.top="100%";toast.onclick=function(){this.desappear(80,true,__self)};this.body().appendChild(toast);for(var i=notfys.length;i--;)notfys[i].trans({top:notfys[i].offsetTop-toast.offsetHeight-this.h(2)},40+10);toast.trans({top:this.h(88)-toast.offsetHeight,left:this.w(75),alpha:1},40);toast.dataset.delay=setTimeout(function(){toast.remove()},8e3);toast.onmouseenter=function(){this.addClass("fbd");clearTimeout(this.dataset.delay)};toast.onmouseleave=function(){this.remClass("fbd");this.dataset.delay=setTimeout(function(t){t.remove()},2e3,this)};if(l===this.modes.LOG){this.exec("../lib/fn/log.php",{text:n})}}call(u,o=null,f=false,s=false,l=false){if(l)this.loading(true);var __self=this,id=u.uton(),iter=1e3,count=s?new Throttle(function(){--iter},2,false):null,sync=null,xhr=new XMLHttpRequest;u="project/"+u;xhr.open("POST",u,!s);xhr.setRequestHeader("Content-Type","application/json");if(!s)xhr.onreadystatechange=function(){if(xhr.readyState==4)if(f)eval(f)({status:xhr.status,data:xhr.responseText.trim(),id:id})};xhr.send(JSON.stringify(o));if(s){while(iter>0&&xhr.status!=4)count.fire();var o={status:xhr.status,data:xhr.responseText,id:id};return f?eval(f)(o):o}}qcell(o=null){if(o)return this.call("../lib/fn/qcell.php",o,function(d){return d.data},true,false)}qio(o=null,n=false){if(o)return this.call("../lib/fn/qio.php",{data:o,n:n},function(d){return d.data},true,false)}load(u,o=null,d=120,t=null,l=true){if(l)this.loading(l);var __self=this,id=u.uton(),uu=document.getElementById(id);if(uu!=undefined){if(uu.isModal())uu.restore();else uu.appear(80,__self);this.loading(false);return}this.call(u,o,function(d){if(d.status!=200)__self.error(d.data);else{var x=document.createElement("div");x.innerHTML=d.data.replace(/{{#}}/g,d.id);console.log(x.firstChild);x=x.firstChild;if(!x||!(typeof x=="object")||["script","style"].indexOf(x.tagName.toLowerCase())>=0)return;else{if(!x.id)x.id=id;x.dataset.initX=x.offsetLeft;x.dataset.initY=x.offsetTop;if(t)t.appendChild(x);else __self.body().appendChild(x);x.appear(40,__self);__self.organize();var scr=x.getElementsByTagName("script");if(scr.length)for(var i=0;i++<scr.length;)eval(scr[i-1].innerText)}}__self.loading(false)},false,l)}exec(u,o=null,f=null){this.call(u,o,f,false,false)}conf_file_handler(f,v=null,fn=null){var __self=this;this.exec("../lib/ctrl/conf_parameters.php",{fild:f,val0:v},function(d){if(d.status=="success")__self.success();else __self.error()})}schema_file_handler(f,v=null,fn=null){var __self=this;this.exec("../lib/ctrl/schema_parameters.php",{fild:f,val0:v},function(d){if(d.status=="success")__self.success();else __self.error()})}hashIt(h){return this.call("../lib/ctrl/hash_it.php",{hash:h},function(d){return d.data},true,false)}pswdCheck(u,p){return this.call("../lib/ctrl/pswd_check.php",{user:u,pswd:p},function(d){return d.data},true,false)}pswdChange(c){this.load("../lib/ui/pswd_change.php")}newId(n=8,t=this.types.STRING){var s=(t==this.types.STRING?"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ":"")+(t==this.types.STRING||t==this.types.INTEGER?"23456789":"")+"01",tmp=[];while(n--)tmp.push(s.charAt(Math.floor(Math.random()*s.length)));return tmp.join("")}jout(o=null){if(!o)return;return this.call("../lib/ctrl/jout_sql.php",o,function(d){if(d)return d;else return null},true,false)}signin(u=null,p=null,k=1,f=null){var __self=this;this.call("../lib/ctrl/signin.php",{user:u,pswd:p,keep:k},f?f:function(d){switch(d.data.int()){case 1:{var x=location.href.split("?")[0];if(x.indexOf("chroot")>0)x+="?ownr="+this.currentUser();location.href=x;break}case 0:__self.error("Ops! Algo deu errado, tente novamente mais tarde...");break;case-1:__self.error("Faltando Usuário ou senha (-1)");break;case-2:__self.error("Usuário ou senha invpalidos (-2)");break;case-3:__self.error("Ops! Talvez esta não seja sua página (-3)");break;case-4:__self.error("Seu e-mail ainda não foi confirmado (-4)");break;case-5:__self.error("Por algum motivo seu usuário está desabilitado (-5)");break;case-6:__self.error("Erro na validação da senha (-6)");break;default:__self.error();break}__self.loading(false)},false,true)}login(){this.load("../lib/ui/login.php")}currentUser(){return this.call("../lib/fn/currentuser.php",null,function(d){return d.data},true,false)}advise(m="Hello world!",setup=null){this.load("../lib/ui/advise.php",{advs:m,setu:setup})}logoff(){this.exec("../lib/fn/logoff.php",null,function(){location.href=location.href.split(/[?]/g)[0]},true)}error(m=null){this.notify(m?m:"Ops! Something went wrong...",["red","white"])}working(m=null){this.notify(m?m:"Ops! We're working on that...",["orange","white"])}success(m){this.notify(m?m:"Yup! Succeed!",["green","white"])}tooltips(){var x=document.getElementsByTagName("tooltip");if(x.length)for(var i=x.length;i--;)x[i].remove();if(this.viewport===this.modes.PORTRAIT)return;else{}}updateControls(c=null){var __self=this;if(c){if(typeof c=="string")c=document.getElementById(c);if(!c)return;this.controls();var x=c.getElementsByClassName("-controlled");if(!x.length)return;for(var i=x.length;i--;){var tmp=x[i].dataset.object.split(/[#;:,-]/g);if(tmp.length==2){var t=eval(tmp[0]).value(tmp[1]);if(t!=null&&t!=""&&t!="0"&&t!="0.00"){if(x[i].tagName.toLowerCase()=="input")x[i].value=t.replace(/&quot;/g,"'");else if(x[i].tagName.toLowerCase()=="select"&&x[i].classList.constains("-filled")&&x[i].dataset.source){var y=x[i].dataset.source.split(/[#;:,-]/g);x[i].dataset.source=[y[0],y[1],y[2]?y[2]:"",y[3]?y[3]:__self.qcell({table:y[0],field:y[1],restrictions:"code='"+t+"'"})].join("#");x[i].refill()}else if(x[i].classList.contains("-switched")){x[i].dataset.state=t?"0":"1";x[i].click()}else x[i].innerText=t.replace(/&quot;/g,"'");if(x[i].dataset.trigger)eval(x[i].dataset.trigger)}else return-1}else return-2}}else return 0}fills(){var x=document.getElementsByClassName("-fill");if(x.length)for(var i=0;i++<x.length;)x[i-1].fill()}scrolls(){}dropdowns(){var __self=this,drops=document.getElementsByClassName("-dropdown");if(drops.length){for(var i=drops.length;i--;){var x=drops[i],bt=x.children[0],nv=x.children[1],cl=x.dataset.paint?x.dataset.paint.split(/[,:;-\s+]/g):[this.schema.bdialog,this.schema.fmain]
;nv.style.top=bt.offsetHeight-2+"px";nv.style.minWidth=2*bt.offsetWidth+"px";nv.style.background=cl[0];nv.style.color=cl[1];x.onmouseenter=function(){bt.style.background=cl[0];bt.style.color=cl[1];nv.style.display="inline-block"};x.onmouseleave=function(){bt.style.background="initial";bt.style.color="initial";nv.style.display="none"}}}}masks(){var masks=document.querySelectorAll("[class*=-mask]");if(masks.length){for(var i=masks.length;i--;){var x=masks[i];if(x.classList.contains("-mask-doc")){x.addEventListener("keyup",function(){this.value=this.value.document()},true);x.remClass("-mask-document")}if(x.classList.contains("-mask-money")){x.addEventListener("keyup",function(){this.value=this.value.money()},true);x.remClass("-mask-money")}if(x.classList.contains("-mask-int")){x.addEventListener("keyup",function(){this.value=this.value.int()},true);x.remClass("-mask-int")}if(x.classList.contains("-mask-float")){x.addEventListener("keyup",function(){this.value=this.value.float()},true);x.remClass("-mask-float")}if(x.classList.contains("-mask-date")){x.addEventListener("keyup",function(){this.value=this.value.date()},true);x.remClass("-mask-date")}if(x.classList.contains("-mask-char")){x.addEventListener("keyup",function(){this.value=this.value.basicChar()},true);x.remClass("-mask-char")}if(x.classList.contains("-mask-hour")){x.addEventListener("keyup",function(){this.value=this.value.hour()},true);x.remClass("-mask-hour")}if(x.classList.contains("-mask-phone")){x.addEventListener("keyup",function(){this.value=this.value.phone()},true);x.remClass("-mask-phone")}}}}apply(f=null,o=null){return f?eval(f)(o):null}checkout(c){if(!c)return false;var ret=true,els=c.getElementsByClassName("-required");for(var i=els.length;i--;)if(!els[i].checkout())ret=false;return ret}}let ab=new Abox;
